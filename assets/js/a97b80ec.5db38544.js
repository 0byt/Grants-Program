"use strict";(self.webpackChunkgrants=self.webpackChunkgrants||[]).push([[11061],{49706:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var n=a(87462),i=(a(67294),a(3905));a(8209);const r={},o="Designing Upchain: A framework for securing Substrate software update systems",s={unversionedId:"docs/RFPs/Open/uptane-for-substrate-design-and-scope",id:"docs/RFPs/Open/uptane-for-substrate-design-and-scope",title:"Designing Upchain: A framework for securing Substrate software update systems",description:"Status:* Open",source:"@site/docs/RFPs/Open/uptane-for-substrate-design-and-scope.md",sourceDirName:"docs/RFPs/Open",slug:"/docs/RFPs/Open/uptane-for-substrate-design-and-scope",permalink:"/docs/RFPs/Open/uptane-for-substrate-design-and-scope",draft:!1,editUrl:"https://github.com/w3f/Grants-Program/edit/master/docs/RFPs/Open/uptane-for-substrate-design-and-scope.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Sub-consensus mechanism",permalink:"/docs/RFPs/Open/sub-consensus"},next:{title:"User Account Access Security Analysis for Wallets",permalink:"/docs/RFPs/Open/user-account-access-analysis"}},l={},p=[{value:"Project Description \ud83d\udcc4",id:"project-description-",level:2},{value:"Context",id:"context",level:3},{value:"Motivation",id:"motivation",level:3},{value:"Deliverables \ud83d\udd29",id:"deliverables-",level:2},{value:"Scope",id:"scope",level:3},{value:"Milestone 1",id:"milestone-1",level:3},{value:"Milestone 2",id:"milestone-2",level:3}],u={toc:p},d="wrapper";function c(e){let{components:t,...a}=e;return(0,i.kt)(d,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"designing-upchain-a-framework-for-securing-substrate-software-update-systems"},"Designing Upchain: A framework for securing Substrate software update systems"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Status:")," Open"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Proposer:")," taqtiqa-mark"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Your Project(s):")," N.A."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Projects you think this work could be useful for")," ",(0,i.kt)("a",{parentName:"li",href:"https://docs.substrate.io/build/upgrade-the-runtime/"},"Substrate runtime upgrades")," and ",(0,i.kt)("a",{parentName:"li",href:"https://docs.substrate.io/tutorials/get-started/upgrade-a-running-network/"},"Substrate network upgrades")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Teams/People that could deliver the RFP")," Parity, William Freudenberger (KILT), Albrecht Weiche")),(0,i.kt)("h2",{id:"project-description-"},"Project Description \ud83d\udcc4"),(0,i.kt)("p",null,"The Upchain Specification, a framework for securing Substrate runtime upgrades and Substrate network upgrades, by extending The Update Framework and modeled on Uptane (The Update Framework Specification extended for automobiles)."),(0,i.kt)("p",null,"This RFP seeks W3F Grant applications addressing/proposing how TUF can be integrated into Substrate."),(0,i.kt)("p",null,"The UpChain specification should serve as an outline of the requirements a chain must implement in order to be described as integrating UpChain."),(0,i.kt)("p",null,"The UpChain specification should allow for Parachin scaling, see for example ",(0,i.kt)("a",{parentName:"p",href:"https://forum.polkadot.network/t/parachain-scaling-by-parablock-splitting/341"},"Parachain scaling by Parablock splitting"),"."),(0,i.kt)("p",null,"The target audience is authors of the Substrate relay and parachain upgrade logic. The specification should be followed by default in all Substrate runtime upgrades and Substrate network upgrades.\nDevelopers using Substrate would be oblivious until an upgrade failed - at which point they would notice their legacy logic is still in place."),(0,i.kt)("p",null,"There is considerable prior art to inform and guide the initial specification.\nA greenfield design should not be accepted."),(0,i.kt)("p",null,"Rather, the Milestone 2 document accompanying the design specification should reference:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://uptane.github.io/papers/uptane-standard.2.0.0.html"},"The Uptane Standard for Design and Implementation 2.0.0")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://theupdateframework.github.io/specification/latest/"},"The Update Framework Specification"))),(0,i.kt)("p",null,"Articulating:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Deviations",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"The section number and title in the Uptane and TUF specification that Upchain should deviate from."),(0,i.kt)("li",{parentName:"ul"},"The Relay-parachain functionality lost or gained by this deviation, described in terms of TUF/Uptane functionality"))),(0,i.kt)("li",{parentName:"ul"},"Extensions",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"The section number and title in the Uptane and TUF specification that should be extended by Upchain"),(0,i.kt)("li",{parentName:"ul"},"The Relay-parachain functionality removed or added by this extension, described in terms of TUF/Uptane functionality"))),(0,i.kt)("li",{parentName:"ul"},"Omissions",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"The section number and title in the Uptane and TUF specification that should be omitted from Upchain"),(0,i.kt)("li",{parentName:"ul"},"The Relay-parachain functionality lost or gained by this omission, described in terms of TUF/Uptane functionality")))),(0,i.kt)("p",null,"Specifically, elements of these two specifications should not silently vanish."),(0,i.kt)("h3",{id:"context"},"Context"),(0,i.kt)("p",null,"The Uptane (ECU update framework for automotives) is chosen as the template to begin with and contrast UpChain for a couple of reasons:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The specification should explicitly address Parachain scaling, see for example ",(0,i.kt)("a",{parentName:"li",href:"https://forum.polkadot.network/t/parachain-scaling-by-parablock-splitting/341"},"Parachain scaling by Parablock splitting"),"."),(0,i.kt)("li",{parentName:"ul"},"While ECU updates have client-server model where centrally managed updates are pushed to clients, and upgrade failures must leave a vehicle in a safe and usable state.  Substrate upgrades have a single source of truth that also must be pushed to nodes, and upgrade failures must leave a node in a safe and usable state."),(0,i.kt)("li",{parentName:"ul"},"Further, there are implementations of the Uptane spec that are not trivial and that experience could be expected to inform the design of how UpChain protects Parachain scaling e.g. motivate any deviations or extensions.")),(0,i.kt)("h3",{id:"motivation"},"Motivation"),(0,i.kt)("p",null,"I\u2019ve come across several reports of a para-relay chain update/upgrade going awry and a chain is bricked, unable to produce blocks - hi-jinx ensue, and everyone lives happily ever after."),(0,i.kt)("p",null,"One such case is discussed here: ",(0,i.kt)("a",{parentName:"p",href:"https://forum.polkadot.network/t/how-to-recover-a-parachain/673"},"How to recover a parachain"),". The consensus appears to be: Automatic rollback is not possible, and a Parachain being inoperable for some period is the way things will be (hi-jinx required)."),(0,i.kt)("p",null,"Potential utility for the wider community is evidenced by the ",(0,i.kt)("a",{parentName:"p",href:"https://forum.polkadot.network/t/polkadot-summit-barcamp-submit-agenda-topics-30-nov-1-dec/669/8"},"Polkadot Summit: Barcamp (30 Nov, 1 Dec) topic Parachain Emergency Recovery")),(0,i.kt)("h2",{id:"deliverables-"},"Deliverables \ud83d\udd29"),(0,i.kt)("p",null,"Upchain Standard for Design and Implementation 1.0.0"),(0,i.kt)("h3",{id:"scope"},"Scope"),(0,i.kt)("p",null,'The scope of "Designing UpChain" is limited to creating a spec which aims at mitigating/avoiding such upgrade failures.'),(0,i.kt)("p",null,"Guidelines to triage and recover after the issue occurred will likely depend on the detail of an implementation, hence should be deferred to the implementation phase."),(0,i.kt)("p",null,"Scope includes providing recommendations and changes at the protocol level.\nIt also include analysis of performance overheads (e.g., overheads on the blockspace).\nThis may entail involving teams at parity/w3f."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Total Estimated Duration:")," Duration of the whole project"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Full-time equivalent (FTE):"),"  Amount of time (in days) required for a single person to complete this project (",(0,i.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Full-time_equivalent"},"see"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Total Costs:")," Amount of Payment in USD for the whole project.")),(0,i.kt)("h3",{id:"milestone-1"},"Milestone 1"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Estimated Duration:")," Duration of milestone 1"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"FTE:"),"  Amount of time (in days) required for a single person to complete this milestone"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Costs:")," Amount of Payment in USD for milestone 1")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Number"),(0,i.kt)("th",{parentName:"tr",align:null},"Deliverable"),(0,i.kt)("th",{parentName:"tr",align:null},"Specification"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"1."),(0,i.kt)("td",{parentName:"tr",align:null},"Upchain Standard for Design and Implementation 1.0.0"),(0,i.kt)("td",{parentName:"tr",align:null},"The Update Framework Specification extended for Substrate Relay and Parachains")))),(0,i.kt)("p",null,"This deliverable can be valuated by comparing the list of (sub-)sections with those from ",(0,i.kt)("a",{parentName:"p",href:"https://theupdateframework.github.io/specification/latest"},"The Update Framework")," - there should be no omissions."),(0,i.kt)("h3",{id:"milestone-2"},"Milestone 2"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Estimated Duration:")," Duration of milestone 1"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"FTE:"),"  Amount of time (in days) required for a single person to complete this milestone"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Costs:")," Amount of Payment in USD for milestone 1")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Number"),(0,i.kt)("th",{parentName:"tr",align:null},"Deliverable"),(0,i.kt)("th",{parentName:"tr",align:null},"Specification"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"1."),(0,i.kt)("td",{parentName:"tr",align:null},"Upchain: Deviations, Extensions and Omissions from The Update Framework"),(0,i.kt)("td",{parentName:"tr",align:null},"As detailed above, a document setting out all deviations, extensions and omissions from The Update Framework")))))}c.isMDXComponent=!0}}]);